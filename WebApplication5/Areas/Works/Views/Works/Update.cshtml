@model Works_ForVM
@{
    ViewData["Title"] = "Update";
   
    var Culture = System.Threading.Thread.CurrentThread.CurrentCulture.Name;
}
<html>


<head>
    <meta name="viewport" content="width=device-width" />
    <style>
        th {
            text-align: center;
            color: black
        }

        #tab {
            position: absolute;
            width: 1000px;
            left: 50%;
            transform: translate(-50%,0);
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 0px
        }
    </style>
    @section styling{
        @if (Culture == "ar-EG")
        {
            <link href="~/css/Floating.css" rel="stylesheet" />
        }
    }

</head>
<body>
    <center>
        <h1 style="text-align:center;color:red;margin-top:30px;margin-bottom:20px">@SharedLocalizer["Update"]</h1>

        <form style="display:inline-block;margin-left:10px" asp-controller="Works" asp-action="Update" method="post">
            <input type="hidden" name="oldproject" value="@ViewBag.proid" />
            <input type="hidden" name="id" value="@ViewBag.id" />
            <input type="hidden" asp-for="id" />
            <div class="form-group">
                <label asp-for="Dnum"> @SharedLocalizer["department"]</label><br />
                <select asp-items="(SelectList)ViewBag.departmentlist" class="form-control" asp-for="Dnum" id="dept">
                    <option value="0">Choose Department</option>
                </select>
                <span asp-validation-for="Dnum" class="text-danger font-weight-bold"></span>
            </div>
            <div class="form-group" style="clear:both">

            </div>
            <div class="form-group">
                <label asp-for="Project_id"> @SharedLocalizer["Project"]</label><br />
                <select class="form-control" id="pro" asp-for="Project_id" disabled>
                    <option>@SharedLocalizer["Choose Project"]</option>
                </select><br />
                <span asp-validation-for="Project_id" class="text-danger font-weight-bold"></span>
            </div>

            <div class="form-group">
                <label asp-for="Employee_id"> @SharedLocalizer["Employee"]</label>
                <input type="Text" class="form-control" asp-for="Employee_id" readonly>
                <span asp-validation-for="Employee_id" class="text-danger font-weight-bold"></span>
            </div>

            <div class="form-group">
                <label asp-for="hours">@SharedLocalizer["Hours"] </label>
                <input type="Text" class="form-control" id="name" placeholder="Enter Salary" asp-for="hours"><br />
                <span asp-validation-for="hours" class="text-danger font-weight-bold"></span>
            </div>

            <center>
                <button type="submit" class="btn btn-success">@SharedLocalizer["Update"]</button>
            </center>
        </form>

    </center>


    @section script{
        <script src="~/plugins/jquery/jquery.js"></script>
        <script src="~/plugins/jquery-validation/jquery.validate.js"></script>
        <script src="~/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
        <script src="~/plugins/bootstrap/js/bootstrap.js"></script>

        <script>
            $(document).ready(function () {


                $("#dept").change(function () {



                    var status = $("#dept option:selected").val();

                    $("#pro").find('option')
                        .remove()
                        .end()

                    if (status != 0) {
                        $.ajax({
                            type: "POST",
                            url: '/Works/Works/GetData',
                            data: { state: status },

                            success: function (res) {
                                $.each(res, function (i, e) {
                                    $("#pro").append("<option value='" + e.id + "'>" + e.name + "</option>");

                                });
                                $("#pro").prop("disabled", false);
                            }

                        });
                    } else {
                        $("#pro").prop("disabled", true);
                    }

                });

            });









        </script>

    }
</body>
</html>

